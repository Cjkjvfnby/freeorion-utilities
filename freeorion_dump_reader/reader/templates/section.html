{% extends "base.html" %}
{% load staticfiles %}

{% block title %}{{section|title}}{% endblock %}
{% block extrahead%}
<link rel="stylesheet" type="text/css" href="{% static "css/table_sorter.css" %}" />
<link rel="stylesheet" type="text/css" href="{% static "css/sections.css" %}" />
<script src="{% static "js/jquery-2.1.3.js" %}"></script>
<script src="{% static "js/jquery.tablesorter.js" %}"></script>
<script src="{% static "js/editor.js" %}"></script>
{% endblock%}

{% block breadcrumbs %}
  {{block.super}}
{% endblock%}

{% block navbar %}
<p class="navbar-text navbar-right">
    {% for s in sections %}
        {% if s != section %}
            <a href="{% url 'section' game=game.game_id turn=turn section=s %}?start={{start}}&end={{end}}" class="navbar-link disabled">{{ s|title }}</a>
        {% endif %}
    {% endfor %}
</p>
{% endblock%}

{% block content %}

<div id="content-main">
    <h2>{{ section|title }}</h2>
    <div class="turn_section">
    {% for turn in data %}
        <span class="h4" title="{{ turn.turn_id }}">Turn {{ turn.turn }} <small><u><em>{{ turn.turn_id}}</em></u> {{ turn.data|length }} items</small></span>
        {% if not forloop.first %}
            <a href="#{{ turn.parent_id }}" class="btn btn-info btn-xs">prev</a>
            <a href="{% url 'diff' game=game.game_id section=section turn1=turn.parent_id turn2=turn.turn_id %}" class="btn btn-info btn-xs">diff with parent</a>
            <a href="{% url 'summary' game=game.game_id turn=turn.turn_id section=section %}?start={{1}}&end={{turn.turn}}" class="btn btn-info btn-xs">turn summary</a>
        {% endif %}

        <table class="tablesorter table table-striped table-bordered table-hover table-condensed table-responsive">
        <thead>
            <tr>
                {% for field in headers %}
                    <th>{{ field.name|title }}</th>
                {% endfor %}
            </tr>
        </thead>

        {% for entry in turn %}
            <tr>
                {% for field in entry.fields %}
                    <td>{{ field.get_html|safe }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
        </table>
    {% endfor %}
    </div>
    <br/>
</div>
{% endblock %}
